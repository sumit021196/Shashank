# Annual Report Upload Dashboard

A React application for managing annual report PDFs with Supabase backend.

## Features

- Upload PDF files with year and quarter categorization
- View and manage uploaded reports
- Sort reports by upload date
- Delete reports with confirmation
- Responsive design for all devices

## Prerequisites

- Node.js (v14 or higher)
- npm or yarn
- Supabase account
- Netlify account (for deployment)

## Environment Variables

Create a `.env` file in the root directory with the following variables:

```
REACT_APP_SUPABASE_URL=your_supabase_url
REACT_APP_SUPABASE_ANON_KEY=your_supabase_anon_key
```

## Local Development

1. Install dependencies:
```bash
npm install
```

2. Start the development server:
```bash
npm start
```

The application will be available at `http://localhost:3000`

## Production Build

1. Create a production build:
```bash
npm run build
```

2. Test the production build locally:
```bash
npx serve -s build
```

## Deployment to Netlify

1. Push your code to a Git repository (GitHub, GitLab, or Bitbucket)

2. Log in to Netlify and click "New site from Git"

3. Choose your repository and configure the build settings:
   - Build command: `npm run build`
   - Publish directory: `build`

4. Add environment variables in Netlify:
   - Go to Site settings > Build & deploy > Environment
   - Add the following variables:
     - `REACT_APP_SUPABASE_URL`
     - `REACT_APP_SUPABASE_ANON_KEY`

5. Deploy the site

## Supabase Setup

1. Create a new Supabase project

2. Create the reports table:
```sql
CREATE TABLE public.reports (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    filename TEXT NOT NULL,
    year TEXT NOT NULL,
    quarter TEXT NOT NULL,
    upload_date TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc'::text, NOW()) NOT NULL
);

-- Set up Row Level Security (RLS)
ALTER TABLE public.reports ENABLE ROW LEVEL SECURITY;

-- Create a policy that allows all operations
CREATE POLICY "Allow all operations" ON public.reports
    FOR ALL
    TO public
    USING (true)
    WITH CHECK (true);
```

3. Create a storage bucket named 'financial-results' and set up the following policies:

For Uploads (INSERT):
```sql
CREATE POLICY "Allow public uploads"
ON storage.objects FOR INSERT
TO public
WITH CHECK (bucket_id = 'financial-results');
```

For Downloads (SELECT):
```sql
CREATE POLICY "Allow public downloads"
ON storage.objects FOR SELECT
TO public
USING (bucket_id = 'financial-results');
```

For Deletes (DELETE):
```sql
CREATE POLICY "Allow public deletes"
ON storage.objects FOR DELETE
TO public
USING (bucket_id = 'financial-results');
```

## Security Considerations

1. The application uses Supabase's Row Level Security (RLS) for database access
2. File uploads are restricted to PDF files only
3. File size is limited to 10MB
4. All operations require proper authentication
5. Environment variables are used for sensitive information

## License

MIT 